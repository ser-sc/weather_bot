# Weather_bot V2

## Содержание
1. [Введение](#Introduction)
2. [Запуск с Docker](#Docker)
3. [Запуск с Docker-compose](#Docker-compose)
4. [Запуск с Docker-compose](#Docker-compose)
5. [Изменения в версии V2](#Changes_V2)
6. [Тестирование бота](#Testing)

## Введение <a name="Introduction"></a>
Telegram бот сообщает прогноз погоды на сегодняшний день для выбранного города погоды для выбранного города

Бот написан на python и поднимается в docker container. Вместе с основным приложением поднимается база данных postgres (БД), в которой хранится список доступных городов

Для запуска бота необходимо зарегистрировать нового бота в Telegram и получить *токен бота*. Инструкция по регистрации бота Telegram: https://botcreators.ru/blog/botfather-instrukciya/

## Запуск с Docker <a name="Docker"></a>

Инструкции по запуску с Docker более не поддерживаются из-за большого количества параметров, добавленных в версии V2.
Для запуска см. [Запуск с Docker-compose](#Docker-compose)

## Запуск с Docker-compose <a name="Docker-compose"></a>

### Подготовка к запуску Docker-compose
Указать *токен бота* вместо *<токен бота без кавычек>* в yml-file. Про получение токена см. во [Введении](#Introduction)

### Сборка docker image, создание и запуск docker container из Docker-compose
Для сборки docker image и запуска docker container необходимо выполнить в терминале в папке проекта одну единственную команду:

`docker-compose up --build -d`

## Изменения в версии V2 <a name="Changes_V2"></a>:
1. Список городов и ссылок теперь хранится не в фале city.txt, а в БД weather_bot_db
2. Приложение и БД поднимается при запуске Docker-compose, при этом инициализируется создание необходимых таблиц и внесение первоначальных значений. Поэтому запуска бота в ручном режиме (см. [Запуск с Docker](#Docker)) более не поддерживается
3. Первоначальные значения повторяют настройки city.txt из предыдущей версии бота
4. Значения в БД можно добавлять без перезапуска бота. После добавления новых данных, они сразу становятся доступными в боте. (Пока не совсем срразу, а клавиатура обновляется только при перезапуске)
5. При добавлении значений необходимо соблюдать осторожность, проверок на корректность значений нет. При некорректных значениях могут возникать непредвиденные ошибки

## Тестирование бота <a name="Testing"></a>
Для тестирования бота создана отдельная инструкция в папке *./Test*
